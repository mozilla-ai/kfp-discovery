name: performer
description: Convert a text document to speech using the specified voice profiles.

inputs:
- {name: podcast_script, type: Markdown, description: The path to the input document.}
- {name: host_voice_profile, type: String, default: af_sarah, description: The voice profile for the host.}
- {name: cohost_voice_profile, type: String, default: am_michael, description: The voice profile for the co-host.}
- {name: audio_format, type: String, default: WAV, description: The file format for the output audio.}

outputs:
- {name: podcast, type: Artifact, description: The path to save the converted speech.}

metadata:
  annotations:
    hints: | 
      inputs 'host_voice_profile' and 'cohost_voice_profile' must be different from each other.
      inputs 'host_voice_profile' and 'cohost_voice_profile' may only have recommended values from https://huggingface.co/hexgrad/Kokoro-82M/blob/main/VOICES.md.
    tags: [text-to-speech, audio, podcast]

implementation:
  container:
    image: dpoulopoulos/kfp-performer:c5b697f
    command: [python]
    args: [
      performer.py,
      --input,  {inputPath: podcast_script},
      --voice-profiles,  {inputValue: host_voice_profile}, {inputValue: cohost_voice_profile},
      --output, {outputPath: podcast},
      --file-type, {inputValue: audio_format},
    ]
